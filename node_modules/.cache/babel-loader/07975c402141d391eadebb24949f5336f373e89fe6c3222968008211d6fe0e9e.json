{"ast":null,"code":"import { __awaiter as e, __generator as r } from \"tslib\";\nimport { createMachine as t, sendUpdate as n } from \"xstate\";\nimport { runValidators as s } from \"../../../validators/index.js\";\nimport { clearError as o, clearFormValues as a, clearTouched as i, clearUsername as d, clearValidationError as l, handleInput as c, handleSubmit as u, handleBlur as m, setFieldErrors as p, setRemoteError as g, setUsername as v } from \"../actions.js\";\nimport { defaultServices as f } from \"../defaultServices.js\";\nfunction E(E) {\n  var h = E.services;\n  return t({\n    id: \"resetPasswordActor\",\n    initial: \"init\",\n    predictableActionArguments: !0,\n    states: {\n      init: {\n        always: [{\n          target: \"confirmResetPassword\",\n          cond: \"shouldAutoConfirmReset\"\n        }, {\n          target: \"resetPassword\"\n        }]\n      },\n      resetPassword: {\n        initial: \"edit\",\n        exit: [\"clearFormValues\", \"clearError\", \"clearTouched\"],\n        states: {\n          edit: {\n            entry: \"sendUpdate\",\n            on: {\n              SUBMIT: {\n                actions: \"handleSubmit\",\n                target: \"submit\"\n              },\n              CHANGE: {\n                actions: \"handleInput\"\n              },\n              BLUR: {\n                actions: \"handleBlur\"\n              }\n            }\n          },\n          submit: {\n            tags: [\"pending\"],\n            entry: [\"sendUpdate\", \"setUsername\", \"clearError\"],\n            invoke: {\n              src: \"resetPassword\",\n              onDone: {\n                target: \"#resetPasswordActor.confirmResetPassword\"\n              },\n              onError: {\n                actions: [\"setRemoteError\"],\n                target: \"edit\"\n              }\n            }\n          }\n        }\n      },\n      confirmResetPassword: {\n        type: \"parallel\",\n        exit: [\"clearFormValues\", \"clearError\", \"clearUsername\", \"clearTouched\"],\n        states: {\n          validation: {\n            initial: \"pending\",\n            states: {\n              pending: {\n                invoke: {\n                  src: \"validateFields\",\n                  onDone: {\n                    target: \"valid\",\n                    actions: \"clearValidationError\"\n                  },\n                  onError: {\n                    target: \"invalid\",\n                    actions: \"setFieldErrors\"\n                  }\n                }\n              },\n              valid: {\n                entry: \"sendUpdate\"\n              },\n              invalid: {\n                entry: \"sendUpdate\"\n              }\n            },\n            on: {\n              CHANGE: {\n                actions: \"handleInput\",\n                target: \".pending\"\n              },\n              BLUR: {\n                actions: \"handleBlur\",\n                target: \".pending\"\n              }\n            }\n          },\n          submission: {\n            initial: \"idle\",\n            states: {\n              idle: {\n                entry: \"sendUpdate\",\n                on: {\n                  SUBMIT: {\n                    actions: \"handleSubmit\",\n                    target: \"validate\"\n                  },\n                  RESEND: \"resendCode\",\n                  CHANGE: {\n                    actions: \"handleInput\"\n                  },\n                  BLUR: {\n                    actions: \"handleBlur\"\n                  }\n                }\n              },\n              validate: {\n                entry: \"sendUpdate\",\n                invoke: {\n                  src: \"validateFields\",\n                  onDone: {\n                    target: \"pending\",\n                    actions: \"clearValidationError\"\n                  },\n                  onError: {\n                    target: \"idle\",\n                    actions: \"setFieldErrors\"\n                  }\n                }\n              },\n              resendCode: {\n                tags: [\"pending\"],\n                entry: [\"clearError\", \"sendUpdate\"],\n                invoke: {\n                  src: \"resetPassword\",\n                  onDone: {\n                    target: \"idle\"\n                  },\n                  onError: {\n                    actions: \"setRemoteError\",\n                    target: \"idle\"\n                  }\n                }\n              },\n              pending: {\n                tags: [\"pending\"],\n                entry: [\"clearError\", \"sendUpdate\"],\n                invoke: {\n                  src: \"confirmResetPassword\",\n                  onDone: {\n                    actions: \"clearUsername\",\n                    target: \"#resetPasswordActor.resolved\"\n                  },\n                  onError: {\n                    actions: \"setRemoteError\",\n                    target: \"idle\"\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      resolved: {\n        type: \"final\"\n      }\n    }\n  }, {\n    actions: {\n      clearError: o,\n      clearFormValues: a,\n      clearTouched: i,\n      clearUsername: d,\n      clearValidationError: l,\n      handleInput: c,\n      handleSubmit: u,\n      handleBlur: m,\n      setFieldErrors: p,\n      setRemoteError: g,\n      setUsername: v,\n      sendUpdate: n()\n    },\n    guards: {\n      shouldAutoConfirmReset: function shouldAutoConfirmReset(e, r) {\n        return !(!e.intent || \"confirmPasswordReset\" !== e.intent);\n      }\n    },\n    services: {\n      resetPassword: function resetPassword(t) {\n        return e(this, void 0, void 0, function () {\n          var e;\n          return r(this, function (r) {\n            return e = t.username, [2, h.handleForgotPassword(e)];\n          });\n        });\n      },\n      confirmResetPassword: function confirmResetPassword(t) {\n        return e(this, void 0, void 0, function () {\n          var e, n, s, o;\n          return r(this, function (r) {\n            return e = t.username, n = t.formValues, s = n.confirmation_code, o = n.password, [2, h.handleForgotPasswordSubmit({\n              username: e,\n              code: s,\n              password: o\n            })];\n          });\n        });\n      },\n      validateFields: function validateFields(t, n) {\n        return e(this, void 0, void 0, function () {\n          return r(this, function (e) {\n            return [2, s(t.formValues, t.touched, t.passwordSettings, [f.validateConfirmPassword])];\n          });\n        });\n      }\n    }\n  });\n}\nexport { E as resetPasswordActor };","map":{"version":3,"names":["__awaiter","e","__generator","r","createMachine","t","sendUpdate","n","runValidators","s","clearError","o","clearFormValues","a","clearTouched","i","clearUsername","d","clearValidationError","l","handleInput","c","handleSubmit","u","handleBlur","m","setFieldErrors","p","setRemoteError","g","setUsername","v","defaultServices","f","E","h","services","id","initial","predictableActionArguments","states","init","always","target","cond","resetPassword","exit","edit","entry","on","SUBMIT","actions","CHANGE","BLUR","submit","tags","invoke","src","onDone","onError","confirmResetPassword","type","validation","pending","valid","invalid","submission","idle","RESEND","validate","resendCode","resolved","guards","shouldAutoConfirmReset","intent","username","handleForgotPassword","formValues","confirmation_code","password","handleForgotPasswordSubmit","code","validateFields","touched","passwordSettings","validateConfirmPassword","resetPasswordActor"],"sources":["/Users/carterbrewer/Downloads/trucker_app-main/node_modules/@aws-amplify/ui/dist/esm/machines/authenticator/actors/resetPassword.js"],"sourcesContent":["import{__awaiter as e,__generator as r}from\"tslib\";import{createMachine as t,sendUpdate as n}from\"xstate\";import{runValidators as s}from\"../../../validators/index.js\";import{clearError as o,clearFormValues as a,clearTouched as i,clearUsername as d,clearValidationError as l,handleInput as c,handleSubmit as u,handleBlur as m,setFieldErrors as p,setRemoteError as g,setUsername as v}from\"../actions.js\";import{defaultServices as f}from\"../defaultServices.js\";function E(E){var h=E.services;return t({id:\"resetPasswordActor\",initial:\"init\",predictableActionArguments:!0,states:{init:{always:[{target:\"confirmResetPassword\",cond:\"shouldAutoConfirmReset\"},{target:\"resetPassword\"}]},resetPassword:{initial:\"edit\",exit:[\"clearFormValues\",\"clearError\",\"clearTouched\"],states:{edit:{entry:\"sendUpdate\",on:{SUBMIT:{actions:\"handleSubmit\",target:\"submit\"},CHANGE:{actions:\"handleInput\"},BLUR:{actions:\"handleBlur\"}}},submit:{tags:[\"pending\"],entry:[\"sendUpdate\",\"setUsername\",\"clearError\"],invoke:{src:\"resetPassword\",onDone:{target:\"#resetPasswordActor.confirmResetPassword\"},onError:{actions:[\"setRemoteError\"],target:\"edit\"}}}}},confirmResetPassword:{type:\"parallel\",exit:[\"clearFormValues\",\"clearError\",\"clearUsername\",\"clearTouched\"],states:{validation:{initial:\"pending\",states:{pending:{invoke:{src:\"validateFields\",onDone:{target:\"valid\",actions:\"clearValidationError\"},onError:{target:\"invalid\",actions:\"setFieldErrors\"}}},valid:{entry:\"sendUpdate\"},invalid:{entry:\"sendUpdate\"}},on:{CHANGE:{actions:\"handleInput\",target:\".pending\"},BLUR:{actions:\"handleBlur\",target:\".pending\"}}},submission:{initial:\"idle\",states:{idle:{entry:\"sendUpdate\",on:{SUBMIT:{actions:\"handleSubmit\",target:\"validate\"},RESEND:\"resendCode\",CHANGE:{actions:\"handleInput\"},BLUR:{actions:\"handleBlur\"}}},validate:{entry:\"sendUpdate\",invoke:{src:\"validateFields\",onDone:{target:\"pending\",actions:\"clearValidationError\"},onError:{target:\"idle\",actions:\"setFieldErrors\"}}},resendCode:{tags:[\"pending\"],entry:[\"clearError\",\"sendUpdate\"],invoke:{src:\"resetPassword\",onDone:{target:\"idle\"},onError:{actions:\"setRemoteError\",target:\"idle\"}}},pending:{tags:[\"pending\"],entry:[\"clearError\",\"sendUpdate\"],invoke:{src:\"confirmResetPassword\",onDone:{actions:\"clearUsername\",target:\"#resetPasswordActor.resolved\"},onError:{actions:\"setRemoteError\",target:\"idle\"}}}}}}},resolved:{type:\"final\"}}},{actions:{clearError:o,clearFormValues:a,clearTouched:i,clearUsername:d,clearValidationError:l,handleInput:c,handleSubmit:u,handleBlur:m,setFieldErrors:p,setRemoteError:g,setUsername:v,sendUpdate:n()},guards:{shouldAutoConfirmReset:function(e,r){return!(!e.intent||\"confirmPasswordReset\"!==e.intent)}},services:{resetPassword:function(t){return e(this,void 0,void 0,(function(){var e;return r(this,(function(r){return e=t.username,[2,h.handleForgotPassword(e)]}))}))},confirmResetPassword:function(t){return e(this,void 0,void 0,(function(){var e,n,s,o;return r(this,(function(r){return e=t.username,n=t.formValues,s=n.confirmation_code,o=n.password,[2,h.handleForgotPasswordSubmit({username:e,code:s,password:o})]}))}))},validateFields:function(t,n){return e(this,void 0,void 0,(function(){return r(this,(function(e){return[2,s(t.formValues,t.touched,t.passwordSettings,[f.validateConfirmPassword])]}))}))}}})}export{E as resetPasswordActor};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}