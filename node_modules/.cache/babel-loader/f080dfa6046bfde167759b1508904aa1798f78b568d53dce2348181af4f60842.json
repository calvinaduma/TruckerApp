{"ast":null,"code":"import { __awaiter as t, __generator as n } from \"tslib\";\nimport { Hub as e } from \"aws-amplify\";\nimport { waitFor as r } from \"xstate/lib/waitFor\";\nimport { ALLOWED_SPECIAL_CHARACTERS as a } from \"./constants.js\";\nimport { getActorState as o } from \"./actor.js\";\nvar u = function u(t) {\n    for (var n = t.trim().split(\"\"), e = 0; e < n.length; e++) {\n      e > 0 && e < n.length - 1 && (n[e] = \"*\");\n    }\n    return n.join(\"\");\n  },\n  i = function i(t) {\n    if (t.length < 4) return t;\n    for (var n = t.split(\"\"), e = 0; e < n.length - 4; e++) {\n      n[e] = \"*\";\n    }\n    return n.join(\"\");\n  },\n  c = function c(e) {\n    return t(void 0, void 0, void 0, function () {\n      return n(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return t.trys.push([0, 2,, 3]), [4, r(e, function (t) {\n              return o(t).matches(\"autoSignIn\");\n            })];\n          case 1:\n          case 2:\n            return t.sent(), [3, 3];\n          case 3:\n            return [2];\n        }\n      });\n    });\n  },\n  s = function s(e, r) {\n    return t(void 0, void 0, void 0, function () {\n      var t, a, u, i;\n      return n(this, function (n) {\n        switch (n.label) {\n          case 0:\n            switch (t = r.send, a = r.getSnapshot(), e.payload.event) {\n              case \"tokenRefresh\":\n                return [3, 1];\n              case \"autoSignIn\":\n                return [3, 2];\n              case \"autoSignIn_failure\":\n                return [3, 5];\n              case \"signOut\":\n              case \"tokenRefresh_failure\":\n                return [3, 7];\n            }\n            return [3, 8];\n          case 1:\n            return a.matches(\"authenticated.idle\") && t(\"TOKEN_REFRESH\"), [3, 9];\n          case 2:\n            return a.matches(\"authenticated\") ? [3, 4] : [4, c(r)];\n          case 3:\n            n.sent(), (null == (u = o(r.getSnapshot())) ? void 0 : u.matches(\"autoSignIn\")) && t({\n              type: \"AUTO_SIGN_IN\",\n              data: e.payload.data\n            }), n.label = 4;\n          case 4:\n            return [3, 9];\n          case 5:\n            return [4, c(r)];\n          case 6:\n            return n.sent(), (null == (i = o(r.getSnapshot())) ? void 0 : i.matches(\"autoSignIn\")) && t({\n              type: \"AUTO_SIGN_IN_FAILURE\",\n              data: e.payload.data\n            }), [3, 9];\n          case 7:\n            return a.matches(\"authenticated.idle\") && t(\"SIGN_OUT\"), [3, 9];\n          case 8:\n            return [3, 9];\n          case 9:\n            return [2];\n        }\n      });\n    });\n  },\n  h = function h(t, n) {\n    return void 0 === n && (n = s), e.listen(\"auth\", function (t, n) {\n      return function (e) {\n        n(e, t);\n      };\n    }(t, n), \"authenticator-hub-handler\");\n  },\n  l = function l(t) {\n    return a.some(function (n) {\n      return t.includes(n);\n    });\n  },\n  f = function f(t, n, e) {\n    return encodeURI(\"otpauth://totp/\".concat(t, \":\").concat(n, \"?secret=\").concat(e, \"&issuer=\").concat(t));\n  };\nexport { u as censorAllButFirstAndLast, i as censorPhoneNumber, s as defaultAuthHubHandler, f as getTotpCodeURL, l as hasSpecialChars, h as listenToAuthHub };","map":{"version":3,"names":["__awaiter","t","__generator","n","Hub","e","waitFor","r","ALLOWED_SPECIAL_CHARACTERS","a","getActorState","o","u","trim","split","length","join","i","c","label","trys","push","matches","sent","s","send","getSnapshot","payload","event","type","data","h","listen","l","some","includes","f","encodeURI","concat","censorAllButFirstAndLast","censorPhoneNumber","defaultAuthHubHandler","getTotpCodeURL","hasSpecialChars","listenToAuthHub"],"sources":["/Users/carterbrewer/Downloads/trucker_app-main/node_modules/@aws-amplify/ui/dist/esm/helpers/authenticator/utils.js"],"sourcesContent":["import{__awaiter as t,__generator as n}from\"tslib\";import{Hub as e}from\"aws-amplify\";import{waitFor as r}from\"xstate/lib/waitFor\";import{ALLOWED_SPECIAL_CHARACTERS as a}from\"./constants.js\";import{getActorState as o}from\"./actor.js\";var u=function(t){for(var n=t.trim().split(\"\"),e=0;e<n.length;e++)e>0&&e<n.length-1&&(n[e]=\"*\");return n.join(\"\")},i=function(t){if(t.length<4)return t;for(var n=t.split(\"\"),e=0;e<n.length-4;e++)n[e]=\"*\";return n.join(\"\")},c=function(e){return t(void 0,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r(e,(function(t){return o(t).matches(\"autoSignIn\")}))];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},s=function(e,r){return t(void 0,void 0,void 0,(function(){var t,a,u,i;return n(this,(function(n){switch(n.label){case 0:switch(t=r.send,a=r.getSnapshot(),e.payload.event){case\"tokenRefresh\":return[3,1];case\"autoSignIn\":return[3,2];case\"autoSignIn_failure\":return[3,5];case\"signOut\":case\"tokenRefresh_failure\":return[3,7]}return[3,8];case 1:return a.matches(\"authenticated.idle\")&&t(\"TOKEN_REFRESH\"),[3,9];case 2:return a.matches(\"authenticated\")?[3,4]:[4,c(r)];case 3:n.sent(),(null==(u=o(r.getSnapshot()))?void 0:u.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN\",data:e.payload.data}),n.label=4;case 4:return[3,9];case 5:return[4,c(r)];case 6:return n.sent(),(null==(i=o(r.getSnapshot()))?void 0:i.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN_FAILURE\",data:e.payload.data}),[3,9];case 7:return a.matches(\"authenticated.idle\")&&t(\"SIGN_OUT\"),[3,9];case 8:return[3,9];case 9:return[2]}}))}))},h=function(t,n){return void 0===n&&(n=s),e.listen(\"auth\",function(t,n){return function(e){n(e,t)}}(t,n),\"authenticator-hub-handler\")},l=function(t){return a.some((function(n){return t.includes(n)}))},f=function(t,n,e){return encodeURI(\"otpauth://totp/\".concat(t,\":\").concat(n,\"?secret=\").concat(e,\"&issuer=\").concat(t))};export{u as censorAllButFirstAndLast,i as censorPhoneNumber,s as defaultAuthHubHandler,f as getTotpCodeURL,l as hasSpecialChars,h as listenToAuthHub};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}